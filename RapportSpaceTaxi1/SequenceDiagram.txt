participant Program
participant LevelLoader
participant FileReader
participant Level
participant Game
participant LevelCreator
participant EntityCreator
participant LevelKeeper
participant Spacebus
participant Statemachine
participant MainMenu
participant GameRunning
participant GameStateType
participant Player

Program->LevelLoader: LoadLevels()
activate Program
activate LevelLoader
loop #ff00ff Until all levels are created
LevelLoader->FileReader:ReadFile()
activate FileReader
activate Level
FileReader->Level: Level()
Level-->FileReader: newLevel()
deactivate Level
FileReader-->LevelLoader: Level
deactivate FileReader
LevelLoader->LevelKeeper: LevelsKeeper.Instance()
activate LevelKeeper
LevelKeeper-->LevelLoader: LevelsKeeper
deactivate LevelKeeper
deactivate LevelLoader
end
Program ->Game: Game()
Game ->Spacebus: GetBus()
Spacebus -->Game: eventBus
Game ->Statemachine: StateMachine()
Statemachine-->Spacebus: SubScribe()
Spacebus->Statemachine: GameEventBus
Statemachine->MainMenu: GetInstance()
MainMenu-->Statemachine: MainMenu Instance
Statemachine--> Game: ActiveState 
Game --> Program: game
loop #ff00ff Until Game ends
Program->Game: game.GameLoop()
activate Game
Game->Statemachine: Statemachine.ActiveState
Statemachine->MainMenu: GetInstance()
alt New Game
MainMenu->Spacebus: Spacebus.GetBus.RegisterEvent()
Spacebus->GameStateType: TransformStringToState
GameStateType-->GameRunning: GameStateType.GameRunning
else Select Level
loop Until New Game or Quit Game Selected
MainMenu->Spacebus: Spacebus.GetBus.RegisterEvent()
Spacebus->MainMenu: selectedLevel + +
MainMenu->Spacebus: Spacebus.GetBus.RegisterEvent()
end
else Quit
MainMenu->Spacebus: Spacebus.GetBus.RegisterEvent()"CLOSE_WINDOW" (spillet lukker)
end
GameRunning->LevelCreator: InitializeGameState
LevelCreator->GameRunning: 
LevelCreator.CreateLevel()
GameRunning-> Player: new Player()
Player->GameRunning: Player 
GameRunning->Spacebus: SpaceBus.GetBus().Subscribe()
alt Collision with platform from below
GameRunning->Spacebus: SpaceBus.GetBus().RegisterEvent
else Collision with platform too fast
GameRunning->Spacebus: Spacebus.GetBus.RegisterEvent
else
GameRunning->Player: player.SetDirection
GameRunning->Player: player.SetGravity
end
GameRunning->Player: RenderPlayer
Game->LevelCreator:
activate LevelCreator
LevelCreator->LevelKeeper: EntityCreator()
activate LevelKeeper
LevelKeeper-->LevelCreator: Returns LevelsKeeper.Instance	
deactivate LevelKeeper
LevelCreator->EntityCreator: CreateLevel()	
activate EntityCreator
EntityCreator-->LevelCreator: Returns EntityContainer[]
deactivate EntityCreator
end
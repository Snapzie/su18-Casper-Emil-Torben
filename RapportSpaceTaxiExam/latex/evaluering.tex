\section{Evaluering}
   Vi har til dette projekt lavet tests løbende for at sikre os at koden har den intenderede funktion. Disse tests består af unit tests og integration tests. Vores unit test består i at teste at File Reader kan læse en fil og konvertere denne til et objekt af typen Level. Dette testes på to forskellige filer der har forskelligt antal platforme, kunder og forhindringer, i og med denne passer uden fejl regner vi med at fil til Level objekt fungerer som den skal.\\
   Vores integration test består i at teste hele kommunikationskæden fra LevelLoader til LevelsKeeper. Testen starter med at kalde LevelLoader og få denne til at loade alle levels og derefter tjekker vi LevelsKeeper for at se om denne indeholder de forventede Level-objekter. Testen indeholder på den måde både LevelLoader, FileReader, Level klassen, og LevelsKeeper. Da denne test også passer kan vi regne med at hele denne kæde fungerer som den skal.\\
   I første aflevering i blok 4 havde vi et problem som gjorde det umuligt at teste vores implementationer hvori der indgik Images fra DIKU-arcade. Til anden aflevering fandt vi en løsning på nogle af problemerne, vi har nemlig lavet en Mock up af IBaseImage. Det der gjorde vi ikke kunne teste implementationen først var at Image havde en Render-method som krævede at der var et Game-window åbent, hvilket vi gerne ville undgå til vores tests. Vi har derfor lavet metoden CreateEntity om så denne tager et objekt der implementerer IBaseImage og da bruger den dette til at sætte på den entity den returnerer. Det betyder at vi i vores tests kan give den et MockUpImage, som implementerer IBaseImage, som argument, mens vi i selve spillet giver den et rigtigt Image. Dette betyder også at klassen EntityCreator ikke længere er dirrekte afhængig af Image. Vi har på den måde lavet vores kode mere abstrakt. Det betyder at hvis vi eksempelvis ville have nogle blokke der brugte ImageStrides i stedet for blot images, kunne vi gøre dette uden at skulle ændre i klassen EntityCreator.\\
   Det har dog ikke været ikke været muligt at bruge denne strategi alle steder eksempelvis i Player-klassen. Her valgte vi dog at ændre i klassen for at gøre den mere testable. Det vi har gjort er at lave en seperat metode, der instansierer de Images der skal bruges til Player, seperat fra konstrukteren. Det vil sige at vi i tests kan lave en Player hvis billeder alle er null, mens vi i spillet med et ekstra metode-kald kan instansierer billederne. Det er selvfølgelig en ulempe at vi er nødt til at kalde en ekstra metode, men fordelen ved dette er at vi kan teste klassen. Dette er senere blevet irrelevant da vi nu kan lave tests der indeholder billeder.  

\subsection{Testplan}
   Til de tests af de klasser der instansiere tekst og billeder har vi oprettet en OpenGL kontekst, ellers vil testene fejle. Til dette er der en metode i DIKU\-Arcade som også laver et vindue, som gør det muligt at teste disse klasser. Det har dog kun været muligt for os at køre disse tests i MonoDevelop, og ikke JetBrains Rider, som resten af vores kode er skrevet i.
   \subsubsection{Player}
      \begin{enumerate}
         \item Test at tyngdekraften får Player til at skifte hastighed. For at kunne gøre dette skal der instansieres et player objekt hvorefter der skal berenges én frame, og da testes det om hastigheden i y-retningen er mindre end 0, og at hastigheden i x-retningen er lig med 0.
         \item Test at kraften på Player er 0 i begge retninger ved instansiering. 
         \item Test at Players boostere starter ved korekte events. Denne skal oprette en PlayerEvent der siger at Player skal tænde en bestemt booster, hvorefter Players ProcessEvent bliver kaldt med dette event som argument. Derefter tjekkes det at Players force er som forventet i begge retninger. Så sendes et event til Player om at slukke for den pågældende motor, og det tjekkes at force nu er 0 i begge retninger.
         \item Tjek at Player bevæger sig når force ikke er 0. Her sættes Players force til noget bestemt hvorefter det testses om spilleren har rykket sig i den forventede retning. 
      \end{enumerate}
   \subsubsection{EntityCreator}
      \begin{enumerate}
         \item Test at position er som forventet for den returnerede Entity. Data til denne test er at man giver EntityCreator et linjenummer og kolonnenummer og tjekker at den returnerede Entity har position som forventet. Det er som nævnt lykkes os at lave denne ved at give den et MockUpImage. 
      \end{enumerate}
   \subsubsection{FileReader}
      \begin{enumerate}
         \item Test at et kald til FileReader returnerer et level-objekt med de forventede attributer. Hver attribut testes i en test for sig, for at det er nemt at se hvilken del der fejler.
      \end{enumerate}
   \subsubsection{LevelCreator}
      \begin{enumerate}
         \item En test der givet et level-nummer tjekker at de EntityContainers der returnerer indeholder de rigtige elementer.
      \end{enumerate}
   \subsubsection{StateMachine}
      \begin{enumerate}
         \item Test at det aktive state er MainMenu, ved instansiering af StateMachine.
      \end{enumerate}
   \subsubsection{MainMenu}
      \begin{enumerate}
         \item Test at det valgte level skifter når der trykkes ENTER mens knappen ''Selected Level'' er aktiv.
      \end{enumerate}
   \subsubsection{Customer}
      \begin{enumerate}
         \item Test at man får færre end maksimum points hvis man afleverer en kunde for sent.
         \item Test at man får maksimum points, hvis man afleverer en kunde til tiden.
      \end{enumerate}
   \subsubsection{Integrationstests}
      \begin{enumerate}
         \item Test kommunikationskæden fra LevelLoader til LevelsKeeper, ved at få LevelLoader til at indlæse levels, og tjek derefter om der er de korrekte levels i LevelsKeeper.
      \end{enumerate}
      Vi har valgt ikke at teste de ting der har med kollision at gøre da vi regner med at dette er testet i DIKUArcade. Det vil sige vi ikke tester det at man samler en kunde op, eller at spillet slutter når man kolliderer med blokke. Vi har heller ikke testet skiftet mellem states da vi mener at dette mere vil være en test af DIKUArcades event handeling. Alle tests passer.